{% extends "template.html" %}

{% block head %}
<title>Apply for Job - Ascend</title>
<style>
    /* Job Details Section */
    .job-details-section {
        padding: 60px 0;
        color: white;
    }

    .job-details-section h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 20px;
    }

    .job-details-section .job-meta {
        font-size: 1rem;
        margin-bottom: 30px;
    }

    .job-description {
        color: white;
    }

    .btn-apply {
        background-color: #007aff; /* Solid Blue */
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
    }

    /* Application Form Section (Modal) */
    .modal-content {
        background-color: #0a2540;
        color: white;
    }

    .modal-body {
        background-color: #0a2540; /* Dark Blue for Form Only */
    }

    .form-control {
        background-color: #1e3a5f;
        color: white;
        border: 1px solid white;
    }

    .btn-submit {
        background-color: #007aff;
        color: white;
        font-size: 1.1rem;
        padding: 12px 30px;
        border-radius: 30px;
    }
</style>
{% endblock %}

{% block body %}
<section class="job-details-section">
    <div class="container">
        <h1>{{ job_post.title }}</h1>
        <div class="job-meta">
            <span><i class="bi bi-building"></i> {{ job_post.username_author }}</span>
            <span>{{ job_post.experienceLevel }}</span>
            <span><i class="bi bi-geo-alt"></i> {{ job_post.remoteOnly }}</span>
            <span><i class="bi bi-clock"></i> {{ job_post.jobType }}</span>
            <span><i class="bi bi-cash"></i> ${{ job_post.salary }}/year</span>
        </div>
        <div class="job-description">
            <p>{{ job_post.content }}</p>
        </div>
        <button class="btn btn-apply" data-bs-toggle="modal" data-bs-target="#applicationModal">Apply Now</button>
    </div>
</section>

<div class="modal fade" id="applicationModal" tabindex="-1" aria-labelledby="applicationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title fs-5" id="applicationModalLabel">Apply for {{ job_post.title }}</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="applicationForm" action="{{ url_for('apply', job_id=job_post.id) }}" method="POST" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="applicant_name" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="applicant_name" name="applicant_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="location" class="form-label">Current Location</label>
                        <input type="text" class="form-control" id="location" name="location" required>
                    </div>
                    <div class="mb-3">
                        <label for="why_job" class="form-label">Why You Want This Job</label>
                        <textarea class="form-control" id="why_job" name="why_job" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="question1" class="form-label">Question 1</label>
                        <textarea class="form-control" id="question1" name="question1" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="question2" class="form-label">Question 2</label>
                        <textarea class="form-control" id="question2" name="question2" rows="3" required></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="resume" class="form-label">Upload Resume</label>
                        <input type="file" class="form-control" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
                    </div>
                    <div class="mb-3">
                        <label for="cover_letter" class="form-label">Upload Cover Letter</label>
                        <input type="file" class="form-control" id="cover_letter" name="cover_letter" accept=".pdf,.doc,.docx" required>
                    </div>
                    <button type="submit" class="btn btn-submit">Submit Application</button>
                </form>
                <div id="successMessage" class="alert alert-success mt-3" style="display:none;">Application successfully submitted!</div>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('applicationForm').addEventListener('submit', function(event) {
        event.preventDefault();
        this.style.display = 'none';
        document.getElementById('successMessage').style.display = 'block';
    });
</script>
{% endblock %}
